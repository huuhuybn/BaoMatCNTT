<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</title>
  <style>
    :root {
      --page-w: 210mm;
      --page-h: 297mm;
      --margin-top: 25mm;
      --margin-bottom: 20mm;
      --margin-left: 30mm;
      --margin-right: 20mm;
      --primary: #1a237e;
      --primary-light: #3949ab;
      --accent: #c62828;
      --bg-light: #f5f7fa;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Times New Roman', Times, serif;
      font-size: 13pt;
      line-height: 1.8;
      color: #1a1a1a;
      background: #e0e0e0;
    }

    .page {
      width: var(--page-w);
      min-height: var(--page-h);
      background: #fff;
      margin: 20px auto;
      padding: var(--margin-top) var(--margin-right) var(--margin-bottom) var(--margin-left);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      position: relative;
      overflow: hidden;
    }

    .page-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 18mm;
      display: flex;
      align-items: center;
      padding: 3mm var(--margin-right) 3mm var(--margin-left);
      border-bottom: 2px solid var(--primary);
      background: #fff;
    }

    .page-header .logo-img {
      height: 12mm;
      margin-right: 8px;
    }

    .page-header .header-text {
      font-size: 9pt;
      color: var(--primary);
      font-weight: 500;
      line-height: 1.3;
    }

    .page-header .header-text span {
      display: block;
      font-size: 8pt;
      color: #555;
      font-weight: 400;
    }

    .page-footer {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 12mm;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 2mm var(--margin-right) 2mm var(--margin-left);
      border-top: 1.5px solid var(--primary);
      background: #fff;
      font-size: 9pt;
      color: #555;
    }

    .page-footer .footer-title {
      font-style: italic;
    }

    .page-footer .page-number {
      font-weight: 600;
      color: var(--primary);
    }

    .page.cover-container {
      padding: 0;
    }

    .page.cover-container .page-header,
    .page.cover-container .page-footer {
      display: none;
    }

    .cover-border {
      border: 3px double var(--primary);
      margin: 15mm;
      padding: 20mm 15mm;
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: calc(var(--page-h) - 40mm);
    }

    .cover-university {
      font-size: 16pt;
      color: var(--primary);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.5px;
    }

    .cover-program {
      font-size: 12pt;
      color: #555;
      margin-top: 4px;
    }

    .cover-logo {
      width: 80px;
      height: 80px;
      margin: 25px 0;
    }

    .cover-logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .cover-divider {
      width: 60%;
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--primary), transparent);
      margin: 15px 0;
    }

    .cover-subject {
      font-size: 12pt;
      color: var(--accent);
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin: 15px 0 5px;
    }

    .cover-title {
      font-size: 24pt;
      color: var(--primary);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
      line-height: 1.4;
      margin: 10px 0;
    }

    .cover-subtitle {
      font-size: 13pt;
      color: #333;
      font-weight: 400;
      margin: 5px 0 30px;
      line-height: 1.5;
    }

    .cover-info {
      margin-top: 30px;
      font-size: 12pt;
    }

    .cover-info p {
      margin: 5px 0;
    }

    .cover-info .label {
      color: #555;
    }

    .cover-info .value {
      font-weight: 600;
      color: #1a1a1a;
    }

    .cover-year {
      font-size: 14pt;
      font-weight: 700;
      color: var(--primary);
      margin-top: 30px;
      letter-spacing: 3px;
    }

    .toc {
      padding-top: 5mm;
    }

    .toc-title {
      font-size: 18pt;
      color: var(--primary);
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 20px;
      font-weight: 700;
    }

    .toc-list {
      list-style: none;
      padding: 0;
    }

    .toc-list>li {
      margin: 8px 0;
      font-size: 12pt;
      font-weight: 600;
      color: var(--primary);
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      border-bottom: 1px dotted #ccc;
      padding-bottom: 4px;
    }

    .toc-list>li>.toc-page {
      font-weight: 400;
      color: #555;
      min-width: 25px;
      text-align: right;
    }

    .toc-sub {
      list-style: none;
      padding-left: 20px;
      margin: 3px 0;
    }

    .toc-sub li {
      font-weight: 400;
      font-size: 11pt;
      color: #333;
      display: flex;
      justify-content: space-between;
      border-bottom: 1px dotted #eee;
      padding: 2px 0;
    }

    .toc-sub li .toc-page {
      color: #777;
    }

    h1.chapter {
      font-size: 18pt;
      color: var(--primary);
      text-transform: uppercase;
      letter-spacing: 1.5px;
      text-align: center;
      padding: 8px 0 12px;
      border-bottom: 3px solid var(--primary);
      margin: 0 0 20px;
    }

    h2 {
      font-size: 14pt;
      color: #283593;
      margin: 22px 0 10px;
      border-left: 4px solid #283593;
      padding-left: 12px;
    }

    h3 {
      font-size: 12pt;
      color: #303f9f;
      margin: 16px 0 8px;
    }

    h4 {
      font-size: 11pt;
      color: #3949ab;
      margin: 12px 0 6px;
    }

    p {
      margin: 6px 0;
      text-align: justify;
    }

    ul,
    ol {
      margin: 6px 0 6px 22px;
    }

    li {
      margin: 3px 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
      font-size: 11pt;
    }

    th {
      background: var(--primary);
      color: #fff;
      padding: 7px 8px;
      text-align: left;
      font-weight: 500;
      font-size: 10.5pt;
    }

    td {
      padding: 6px 8px;
      border: 1px solid #ddd;
    }

    tr:nth-child(even) {
      background: #f5f5f5;
    }

    pre {
      background: #1e1e2e;
      color: #cdd6f4;
      padding: 12px 14px;
      border-radius: 6px;
      font-family: Consolas, 'Courier New', monospace;
      font-size: 9.5pt;
      line-height: 1.5;
      overflow-x: auto;
      margin: 8px 0;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    code {
      font-family: Consolas, 'Courier New', monospace;
      font-size: 10pt;
    }

    p code {
      background: #e8eaf6;
      padding: 1px 4px;
      border-radius: 3px;
      color: var(--primary);
    }

    blockquote {
      border-left: 4px solid var(--primary);
      padding: 8px 14px;
      background: #e8eaf6;
      margin: 10px 0;
      font-size: 11pt;
    }

    .diagram {
      background: #eceff1;
      border: 1px solid #b0bec5;
      padding: 12px;
      border-radius: 4px;
      font-family: Consolas, 'Courier New', monospace;
      font-size: 10pt;
      white-space: pre;
      margin: 10px 0;
      line-height: 1.4;
      overflow-x: auto;
    }

    .result-table th {
      background: #2e7d32;
    }

    .threat-table td:last-child {
      font-weight: 500;
    }

    strong {
      color: var(--primary);
    }

    .separator {
      border: none;
      border-top: 2px solid var(--primary);
      margin: 20px 0;
    }

    .stars {
      color: #f9a825;
      letter-spacing: 1px;
    }

    .ref {
      font-size: 10.5pt;
      color: #444;
    }

    .ref li {
      margin: 4px 0;
    }

    @media print {
      body {
        background: #fff;
      }

      .page {
        width: auto;
        min-height: auto;
        margin: 0;
        padding: 0;
        box-shadow: none;
        page-break-after: always;
      }

      .page:last-child {
        page-break-after: auto;
      }

      .page-header,
      .page-footer {
        display: none !important;
      }

      @page {
        size: A4;
        margin: 20mm 20mm 18mm 30mm;
      }

      pre {
        white-space: pre-wrap !important;
        word-wrap: break-word !important;
        font-size: 9pt;
      }

      table {
        page-break-inside: avoid;
      }

      h1,
      h2,
      h3 {
        page-break-after: avoid;
      }
    }
  </style>
</head>

<body>

  <!-- ===== TRANG BÌA ===== -->
  <div class="page cover-container">
    <div class="cover-border">
      <p style="font-size: 13pt; color: #333; font-weight: 500; text-transform: uppercase; letter-spacing: 1px;">Bộ Giáo
        dục và Đào tạo</p>
      <p class="cover-university">Trường Đại học Hòa Bình</p>
      <div class="cover-logo">
        <img src="logo.png" alt="Logo Đại học Hòa Bình"
          onerror="this.outerHTML='<div style=&quot;font-size:48pt;color:#1a237e&quot;>&#128737;</div>'">
      </div>
      <div class="cover-divider"></div>
      <p class="cover-subject">Bài tiểu luận</p>
      <p style="font-size: 14pt; color: var(--primary); font-weight: 600; margin: 5px 0;">Bảo mật và An toàn Thông tin
        trong Cơ sở Dữ liệu</p>
      <h1 class="cover-title">Đề tài: Nghiên cứu các giải pháp<br>bảo mật cơ sở dữ liệu<br>và demo thực hành
        trên<br>Microsoft SQL Server</h1>
      <div class="cover-divider"></div>
      <div class="cover-info" style="text-align: left; width: 80%;">
        <p><span class="label">Giáo viên hướng dẫn:</span> <span class="value">TS. Đoàn Văn Hòa</span></p>
        <p><span class="label">Lớp:</span> <span class="value">CNTT 2023</span></p>
        <p style="margin-top: 10px;"><span class="label">Học viên:</span></p>
        <p><span class="value">825802001 — Nguyễn Tuấn Anh</span></p>
        <p><span class="value">825802002 — Nguyễn Thị Phương</span></p>
        <p><span class="value">825802003 — Phan Nguyễn Tấn Vũ</span></p>
        <p><span class="value">825802004 — Nguyễn Hữu Huy</span></p>
        <p><span class="value">Ma Văn Tú</span></p>
      </div>
      <p class="cover-year">Hà Nội, tháng 01/2026</p>
    </div>
  </div>

  <!-- ===== MỤC LỤC ===== -->
  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">i</span>
    </div>
    <div class="toc">
      <h2 class="toc-title">Mục Lục</h2>
      <ul class="toc-list">
        <li>Chương 1. Cơ sở lý thuyết <span class="toc-page">1</span></li>
        <ul class="toc-sub">
          <li>1.1. Cơ sở dữ liệu <span class="toc-page">1</span></li>
          <li>1.2. Hệ quản trị cơ sở dữ liệu <span class="toc-page">3</span></li>
          <li>1.3. Các thách thức và sự đánh đổi khi triển khai bảo mật <span class="toc-page">5</span></li>
        </ul>
        <li>Chương 2. Vấn đề nghiên cứu và giải pháp an toàn <span class="toc-page">7</span></li>
        <ul class="toc-sub">
          <li>2.1. Các mối đe dọa đối với cơ sở dữ liệu <span class="toc-page">7</span></li>
          <li>2.2. Các giải pháp bảo mật và an toàn thông tin <span class="toc-page">9</span></li>
          <li>2.3. Tổng kết các giải pháp <span class="toc-page">13</span></li>
        </ul>
        <li>Chương 3. Demo các bước bảo mật trên SQL Server <span class="toc-page">14</span></li>
        <ul class="toc-sub">
          <li>3.0. Chuẩn bị môi trường Demo <span class="toc-page">14</span></li>
          <li>3.1. Demo Phân quyền người dùng <span class="toc-page">16</span></li>
          <li>3.2. Demo Mã hóa dữ liệu <span class="toc-page">19</span></li>
          <li>3.3. Demo Kiểm toán (Audit) <span class="toc-page">21</span></li>
          <li>3.4. Demo Sao lưu và Phục hồi <span class="toc-page">23</span></li>
          <li>3.5. Tổng kết Demo <span class="toc-page">25</span></li>
        </ul>
        <li>Chương 4. Áp dụng bảo mật cho dự án thực tiễn — Opdo.store <span class="toc-page">26</span></li>
        <ul class="toc-sub">
          <li>4.1. Giới thiệu dự án Opdo.store <span class="toc-page">26</span></li>
          <li>4.2. Kiến trúc hệ thống và CSDL <span class="toc-page">27</span></li>
          <li>4.3. Triển khai phân quyền người dùng <span class="toc-page">28</span></li>
          <li>4.4. Triển khai mã hóa dữ liệu <span class="toc-page">30</span></li>
          <li>4.5. Triển khai kiểm toán và giám sát <span class="toc-page">31</span></li>
          <li>4.6. Triển khai sao lưu và phục hồi <span class="toc-page">32</span></li>
          <li>4.7. Các biện pháp bảo mật bổ sung <span class="toc-page">33</span></li>
          <li>4.8. Tổng kết triển khai thực tiễn <span class="toc-page">34</span></li>
        </ul>
        <li>Kết luận <span class="toc-page">35</span></li>
        <li>Tài liệu tham khảo <span class="toc-page">37</span></li>
      </ul>
    </div>
  </div>

  <!-- ===== CHƯƠNG 1 ===== -->
  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">1</span>
    </div>

    <h1 class="chapter">Chương 1. Cơ Sở Lý Thuyết</h1>

    <h2>1.1. Cơ sở dữ liệu (Database)</h2>
    <h3>1.1.1. Khái niệm</h3>
    <p>Cơ sở dữ liệu (CSDL) là một tập hợp có tổ chức của các dữ liệu có liên quan với nhau, được lưu trữ trên các thiết
      bị lưu trữ máy tính, được thiết kế và xây dựng sao cho việc cập nhật, tìm kiếm và khai thác dữ liệu phục vụ cho
      các mục đích khác nhau của nhiều người dùng một cách dễ dàng và hiệu quả.</p>
    <p>Một CSDL có các đặc điểm cơ bản sau:</p>
    <ul>
      <li><strong>Tính cấu trúc (Structured):</strong> Dữ liệu được tổ chức theo một cấu trúc nhất định, thường là dạng
        bảng (table) với các hàng (row) và cột (column).</li>
      <li><strong>Tính chia sẻ (Shared):</strong> Nhiều người dùng và ứng dụng khác nhau có thể truy cập và sử dụng cùng
        một CSDL.</li>
      <li><strong>Tính toàn vẹn (Integrity):</strong> Dữ liệu phải đảm bảo tính chính xác, nhất quán và đáng tin cậy.
      </li>
      <li><strong>Tính độc lập (Independence):</strong> Dữ liệu được quản lý độc lập với các chương trình ứng dụng sử
        dụng chúng.</li>
    </ul>

    <h3>1.1.2. Phân loại cơ sở dữ liệu</h3>
    <table>
      <tr>
        <th>Loại CSDL</th>
        <th>Đặc điểm</th>
        <th>Ví dụ</th>
      </tr>
      <tr>
        <td><strong>CSDL quan hệ (Relational)</strong></td>
        <td>Dữ liệu tổ chức dạng bảng, liên kết qua khóa ngoại</td>
        <td>SQL Server, MySQL, PostgreSQL, Oracle</td>
      </tr>
      <tr>
        <td><strong>CSDL NoSQL</strong></td>
        <td>Linh hoạt về cấu trúc, phù hợp dữ liệu phi cấu trúc</td>
        <td>MongoDB, Cassandra, Redis</td>
      </tr>
      <tr>
        <td><strong>CSDL phân tán (Distributed)</strong></td>
        <td>Dữ liệu phân tán trên nhiều máy chủ</td>
        <td>Google Spanner, CockroachDB</td>
      </tr>
      <tr>
        <td><strong>CSDL đám mây (Cloud)</strong></td>
        <td>Hosted trên nền tảng đám mây</td>
        <td>Azure SQL, Amazon RDS, Google Cloud SQL</td>
      </tr>
      <tr>
        <td><strong>CSDL hướng đối tượng</strong></td>
        <td>Lưu trữ dữ liệu dưới dạng đối tượng</td>
        <td>ObjectDB, db4o</td>
      </tr>
    </table>

    <h3>1.1.3. Mô hình dữ liệu quan hệ</h3>
    <p>Mô hình dữ liệu quan hệ (Relational Data Model) do E.F. Codd đề xuất năm 1970, là mô hình phổ biến nhất hiện nay.
      Trong mô hình này:</p>
    <ul>
      <li><strong>Quan hệ (Relation):</strong> Được biểu diễn dưới dạng bảng hai chiều.</li>
      <li><strong>Thuộc tính (Attribute):</strong> Tên các cột trong bảng, mô tả đặc điểm của thực thể.</li>
      <li><strong>Bộ (Tuple):</strong> Mỗi hàng trong bảng, biểu diễn một bản ghi cụ thể.</li>
      <li><strong>Khóa chính (Primary Key):</strong> Thuộc tính hoặc tập thuộc tính xác định duy nhất mỗi bộ.</li>
      <li><strong>Khóa ngoại (Foreign Key):</strong> Thuộc tính tham chiếu đến khóa chính của bảng khác, tạo liên kết
        giữa các bảng.</li>
    </ul>

    <h3>1.1.4. Các ràng buộc toàn vẹn dữ liệu</h3>
    <ul>
      <li><strong>Ràng buộc miền giá trị (Domain Constraint):</strong> Giới hạn tập giá trị hợp lệ cho một thuộc tính.
      </li>
      <li><strong>Ràng buộc khóa (Key Constraint):</strong> Đảm bảo tính duy nhất của khóa chính.</li>
      <li><strong>Ràng buộc toàn vẹn thực thể (Entity Integrity):</strong> Khóa chính không được chứa giá trị NULL.</li>
      <li><strong>Ràng buộc toàn vẹn tham chiếu (Referential Integrity):</strong> Giá trị khóa ngoại phải tồn tại trong
        bảng tham chiếu hoặc là NULL.</li>
    </ul>
  </div>

  <!-- Trang tiếp - HQTCSDL -->
  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">3</span>
    </div>

    <h2>1.2. Hệ quản trị cơ sở dữ liệu (DBMS)</h2>
    <h3>1.2.1. Khái niệm</h3>
    <p>Hệ quản trị cơ sở dữ liệu (HQTCSDL - Database Management System) là phần mềm hệ thống cho phép người dùng định
      nghĩa, tạo lập, duy trì và kiểm soát truy cập đến cơ sở dữ liệu. HQTCSDL đóng vai trò trung gian giữa người
      dùng/ứng dụng và dữ liệu vật lý được lưu trữ.</p>

    <h3>1.2.2. Các chức năng chính của HQTCSDL</h3>
    <ol>
      <li><strong>Định nghĩa dữ liệu (Data Definition):</strong> Cho phép tạo, sửa đổi, xóa các cấu trúc dữ liệu bằng
        ngôn ngữ DDL.</li>
      <li><strong>Thao tác dữ liệu (Data Manipulation):</strong> Cho phép thêm, sửa, xóa, truy vấn dữ liệu bằng ngôn ngữ
        DML.</li>
      <li><strong>Kiểm soát truy cập (Access Control):</strong> Quản lý quyền truy cập của người dùng, đảm bảo bảo mật.
      </li>
      <li><strong>Quản lý giao dịch (Transaction Management):</strong> Đảm bảo tính ACID (Atomicity, Consistency,
        Isolation, Durability).</li>
      <li><strong>Sao lưu và phục hồi (Backup &amp; Recovery):</strong> Cung cấp cơ chế bảo vệ dữ liệu khỏi hỏng hóc.
      </li>
      <li><strong>Tối ưu hóa truy vấn (Query Optimization):</strong> Tự động chọn phương án thực thi tối ưu.</li>
    </ol>

    <h3>1.2.3. Các HQTCSDL phổ biến</h3>
    <table>
      <tr>
        <th>HQTCSDL</th>
        <th>Nhà phát triển</th>
        <th>Đặc điểm nổi bật</th>
      </tr>
      <tr>
        <td><strong>Microsoft SQL Server</strong></td>
        <td>Microsoft</td>
        <td>Tích hợp tốt với hệ sinh thái Microsoft, bảo mật mạnh mẽ</td>
      </tr>
      <tr>
        <td><strong>Oracle Database</strong></td>
        <td>Oracle Corp.</td>
        <td>Hiệu năng cao, bảo mật enterprise, hỗ trợ multi-tenant</td>
      </tr>
      <tr>
        <td><strong>MySQL</strong></td>
        <td>Oracle Corp.</td>
        <td>Mã nguồn mở, phổ biến cho web, hiệu suất tốt</td>
      </tr>
      <tr>
        <td><strong>PostgreSQL</strong></td>
        <td>Cộng đồng</td>
        <td>Mã nguồn mở, tuân thủ chuẩn SQL, hỗ trợ JSON</td>
      </tr>
      <tr>
        <td><strong>MongoDB</strong></td>
        <td>MongoDB Inc.</td>
        <td>NoSQL, linh hoạt schema, phù hợp big data</td>
      </tr>
    </table>
  </div>

  <!-- Trang tiếp - Phân tích ưu nhược điểm -->
  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">5</span>
    </div>

    <h2>1.3. Các thách thức và sự đánh đổi khi triển khai bảo mật</h2>
    <h3>1.3.1. Tổng quan về bảo mật thông tin</h3>
    <p>Bảo mật thông tin (Information Security) là tập hợp các biện pháp nhằm bảo vệ thông tin khỏi các truy cập, sử
      dụng, tiết lộ, sửa đổi hoặc phá hủy trái phép. Ba trụ cột cơ bản của bảo mật thông tin được gọi là <strong>bộ ba
        CIA</strong>:</p>
    <ul>
      <li><strong>Tính bảo mật (Confidentiality):</strong> Đảm bảo thông tin chỉ được truy cập bởi những người được ủy
        quyền.</li>
      <li><strong>Tính toàn vẹn (Integrity):</strong> Đảm bảo thông tin không bị sửa đổi trái phép.</li>
      <li><strong>Tính sẵn sàng (Availability):</strong> Đảm bảo thông tin luôn sẵn sàng khi cần thiết.</li>
    </ul>

    <h3>1.3.2. Ưu điểm của việc triển khai bảo mật thông tin</h3>
    <table>
      <tr>
        <th>STT</th>
        <th>Ưu điểm</th>
        <th>Mô tả chi tiết</th>
      </tr>
      <tr>
        <td>1</td>
        <td><strong>Bảo vệ dữ liệu nhạy cảm</strong></td>
        <td>Ngăn chặn rò rỉ thông tin cá nhân, tài chính, bí mật kinh doanh</td>
      </tr>
      <tr>
        <td>2</td>
        <td><strong>Kiểm soát truy cập hiệu quả</strong></td>
        <td>Phân quyền rõ ràng theo nguyên tắc least privilege</td>
      </tr>
      <tr>
        <td>3</td>
        <td><strong>Phát hiện và ngăn chặn tấn công</strong></td>
        <td>Hệ thống giám sát giúp phát hiện sớm hành vi bất thường</td>
      </tr>
      <tr>
        <td>4</td>
        <td><strong>Đảm bảo tính toàn vẹn dữ liệu</strong></td>
        <td>Mã hóa và chữ ký số bảo vệ dữ liệu khỏi thay đổi trái phép</td>
      </tr>
      <tr>
        <td>5</td>
        <td><strong>Khả năng phục hồi sau sự cố</strong></td>
        <td>Sao lưu định kỳ giúp giảm thiểu thời gian gián đoạn</td>
      </tr>
      <tr>
        <td>6</td>
        <td><strong>Tăng uy tín tổ chức</strong></td>
        <td>Hệ thống bảo mật tốt tạo niềm tin cho khách hàng, đối tác</td>
      </tr>
      <tr>
        <td>7</td>
        <td><strong>Tuân thủ quy định pháp luật</strong></td>
        <td>Đáp ứng Luật An ninh mạng, GDPR và các tiêu chuẩn quốc tế</td>
      </tr>
    </table>

    <h3>1.3.3. Thách thức và sự đánh đổi khi triển khai</h3>
    <table>
      <tr>
        <th>STT</th>
        <th>Thách thức</th>
        <th>Mô tả chi tiết</th>
      </tr>
      <tr>
        <td>1</td>
        <td><strong>Chi phí triển khai cao</strong></td>
        <td>Đầu tư phần cứng, phần mềm và nhân sự chuyên môn đòi hỏi ngân sách lớn</td>
      </tr>
      <tr>
        <td>2</td>
        <td><strong>Giảm hiệu năng hệ thống</strong></td>
        <td>Mã hóa, kiểm toán tạo thêm tải cho hệ thống</td>
      </tr>
      <tr>
        <td>3</td>
        <td><strong>Phức tạp trong quản trị</strong></td>
        <td>Quản lý chính sách bảo mật đòi hỏi kiến thức chuyên sâu</td>
      </tr>
      <tr>
        <td>4</td>
        <td><strong>Ảnh hưởng trải nghiệm người dùng</strong></td>
        <td>Xác thực đa yếu tố có thể gây bất tiện</td>
      </tr>
      <tr>
        <td>5</td>
        <td><strong>Khó cân bằng bảo mật và tiện dụng</strong></td>
        <td>Bảo mật quá chặt cản trở năng suất; quá lỏng dễ bị tấn công</td>
      </tr>
      <tr>
        <td>6</td>
        <td><strong>Không có giải pháp hoàn hảo</strong></td>
        <td>Luôn tồn tại lỗ hổng zero-day và rủi ro từ con người</td>
      </tr>
      <tr>
        <td>7</td>
        <td><strong>Yêu cầu cập nhật liên tục</strong></td>
        <td>Mối đe dọa tiến hóa, đòi hỏi cập nhật và đào tạo thường xuyên</td>
      </tr>
    </table>

    <h3>1.3.4. Ma trận đánh giá các phương pháp bảo mật</h3>
    <table>
      <tr>
        <th>Phương pháp</th>
        <th>Bảo mật</th>
        <th>Hiệu năng</th>
        <th>Chi phí</th>
        <th>Độ phức tạp</th>
      </tr>
      <tr>
        <td>Phân quyền (Authorization)</td>
        <td>Cao</td>
        <td>Cao</td>
        <td>Thấp</td>
        <td>Trung bình</td>
      </tr>
      <tr>
        <td>Mã hóa dữ liệu (Encryption)</td>
        <td>Rất cao</td>
        <td>Trung bình</td>
        <td>Trung bình</td>
        <td>Cao</td>
      </tr>
      <tr>
        <td>Kiểm toán (Auditing)</td>
        <td>Cao</td>
        <td>Cao</td>
        <td>Trung bình</td>
        <td>Trung bình</td>
      </tr>
      <tr>
        <td>Sao lưu &amp; Phục hồi</td>
        <td>Trung bình</td>
        <td>Cao</td>
        <td>Trung bình</td>
        <td>Trung bình</td>
      </tr>
      <tr>
        <td>Tường lửa (Firewall)</td>
        <td>Cao</td>
        <td>Cao</td>
        <td>Trung bình</td>
        <td>Cao</td>
      </tr>
      <tr>
        <td>Xác thực đa yếu tố (MFA)</td>
        <td>Rất cao</td>
        <td>Cao</td>
        <td>Trung bình</td>
        <td>Cao</td>
      </tr>
    </table>
    <blockquote><strong>Ghi chú:</strong> Sao lưu &amp; Phục hồi chủ yếu phục vụ <strong>Tính sẵn sàng</strong>
      (Availability), không trực tiếp tăng tính bảo mật (Confidentiality). Tuy nhiên, nếu file backup không được mã hóa,
      nó trở thành một vector tấn công.</blockquote>
  </div>


  <!-- ===== CHƯƠNG 2 ===== -->
  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">7</span>
    </div>
    <h1 class="chapter">Chương 2. Vấn Đề Nghiên Cứu và Giải Pháp An Toàn</h1>
    <h2>2.1. Các mối đe dọa đối với cơ sở dữ liệu</h2>
    <h3>2.1.1. Tổng quan tình hình an ninh mạng</h3>
    <p>Trong bối cảnh chuyển đổi số toàn cầu, các cuộc tấn công mạng ngày càng gia tăng cả về số lượng lẫn mức độ tinh
      vi:</p>
    <ul>
      <li>Số lượng cuộc tấn công ransomware tăng trung bình 13% mỗi năm.</li>
      <li>Chi phí trung bình cho một vụ rò rỉ dữ liệu lên đến 4.45 triệu USD (IBM, 2023).</li>
      <li>82% các vụ vi phạm dữ liệu liên quan đến yếu tố con người (Verizon DBIR, 2023).</li>
      <li>Tại Việt Nam, Luật An ninh mạng 2018 và Nghị định 13/2023/NĐ-CP đặt ra yêu cầu nghiêm ngặt về bảo mật.</li>
    </ul>
    <h3>2.1.2. Phân loại các mối đe dọa</h3>
    <h4>A. Tấn công từ bên ngoài</h4>
    <table class="threat-table">
      <tr>
        <th>Loại tấn công</th>
        <th>Mô tả</th>
        <th>Mức độ</th>
      </tr>
      <tr>
        <td><strong>SQL Injection</strong></td>
        <td>Chèn mã SQL độc hại qua input để truy cập/sửa đổi CSDL trái phép</td>
        <td>&#128308; Rất cao</td>
      </tr>
      <tr>
        <td><strong>Brute Force</strong></td>
        <td>Thử tất cả tổ hợp mật khẩu để đăng nhập trái phép</td>
        <td>&#128992; Cao</td>
      </tr>
      <tr>
        <td><strong>Man-in-the-Middle</strong></td>
        <td>Chặn bắt và sửa đổi dữ liệu truyền giữa client và server</td>
        <td>&#128308; Rất cao</td>
      </tr>
      <tr>
        <td><strong>Ransomware</strong></td>
        <td>Mã hóa dữ liệu đòi tiền chuộc</td>
        <td>&#128308; Rất cao</td>
      </tr>
      <tr>
        <td><strong>Privilege Escalation</strong></td>
        <td>Lợi dụng lỗ hổng để user thường chiếm quyền sysadmin trên CSDL</td>
        <td>&#128308; Rất cao</td>
      </tr>
      <tr>
        <td><strong>Backup Theft</strong></td>
        <td>Đánh cắp file sao lưu (.bak) không được mã hóa từ ổ cứng/mạng</td>
        <td>&#128992; Cao</td>
      </tr>
    </table>
    <h4>B. Mối đe dọa từ bên trong</h4>
    <table class="threat-table">
      <tr>
        <th>Loại mối đe dọa</th>
        <th>Mô tả</th>
        <th>Mức độ</th>
      </tr>
      <tr>
        <td><strong>Nhân viên cố ý</strong></td>
        <td>Nhân viên có quyền truy cập cố tình lấy cắp hoặc phá hoại dữ liệu</td>
        <td>&#128308; Rất cao</td>
      </tr>
      <tr>
        <td><strong>Sai sót vô ý</strong></td>
        <td>Xóa nhầm dữ liệu, cấu hình sai, chia sẻ quyền không đúng</td>
        <td>&#128992; Cao</td>
      </tr>
      <tr>
        <td><strong>Tài khoản bị chiếm</strong></td>
        <td>Tài khoản hợp lệ bị kẻ tấn công kiểm soát</td>
        <td>&#128308; Rất cao</td>
      </tr>
      <tr>
        <td><strong>Quyền truy cập dư thừa</strong></td>
        <td>Cấp quyền nhiều hơn mức cần thiết</td>
        <td>&#128993; Trung bình</td>
      </tr>
    </table>
    <h4>C. Lỗ hổng kỹ thuật</h4>
    <ul>
      <li><strong>Cấu hình mặc định:</strong> Sử dụng tài khoản <code>sa</code> với mật khẩu yếu hoặc rỗng.</li>
      <li><strong>Phần mềm lỗi thời:</strong> Không cập nhật bản vá bảo mật cho HQTCSDL.</li>
      <li><strong>Dữ liệu không mã hóa:</strong> Lưu trữ mật khẩu dạng plain text.</li>
      <li><strong>Thiếu kiểm toán:</strong> Không ghi nhận log hoạt động.</li>
      <li><strong>Thiếu sao lưu:</strong> Không có kế hoạch sao lưu định kỳ.</li>
    </ul>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">9</span>
    </div>
    <h2>2.2. Các giải pháp bảo mật và an toàn thông tin</h2>
    <p>Dựa trên phân tích các mối đe dọa, chúng tôi đề xuất <strong>4 giải pháp chính</strong> triển khai trên SQL
      Server:</p>
    <h3>2.2.1. Giải pháp 1: Phân quyền người dùng (Authorization &amp; Access Control)</h3>
    <p><strong>Mục tiêu:</strong> Đảm bảo mỗi người dùng chỉ có quyền truy cập tối thiểu cần thiết.</p>
    <p><strong>Nguyên tắc:</strong> Principle of Least Privilege (PoLP), Separation of Duties (SoD), Role-Based Access
      Control (RBAC).</p>
    <table>
      <tr>
        <th>Biện pháp</th>
        <th>Mô tả</th>
        <th>Công cụ SQL Server</th>
      </tr>
      <tr>
        <td>Tạo Login &amp; User</td>
        <td>Phân biệt tài khoản đăng nhập và tài khoản CSDL</td>
        <td><code>CREATE LOGIN</code>, <code>CREATE USER</code></td>
      </tr>
      <tr>
        <td>Tạo Role</td>
        <td>Nhóm quyền theo vai trò nghiệp vụ</td>
        <td><code>CREATE ROLE</code>, <code>ALTER ROLE</code></td>
      </tr>
      <tr>
        <td>Cấp/Thu hồi quyền</td>
        <td>Gán quyền cụ thể cho từng role/user</td>
        <td><code>GRANT</code>, <code>DENY</code>, <code>REVOKE</code></td>
      </tr>
      <tr>
        <td>Schema separation</td>
        <td>Tách biệt dữ liệu theo schema</td>
        <td><code>CREATE SCHEMA</code></td>
      </tr>
      <tr>
        <td>Row-Level Security</td>
        <td>Kiểm soát truy cập ở mức dòng dữ liệu</td>
        <td>Security Policy, Filter Predicate</td>
      </tr>
    </table>
    <h3>2.2.2. Giải pháp 2: Mã hóa dữ liệu (Data Encryption)</h3>
    <p><strong>Mục tiêu:</strong> Bảo vệ dữ liệu nhạy cảm cả khi lưu trữ (at rest) và khi truyền tải (in transit).</p>
    <table>
      <tr>
        <th>Phương pháp</th>
        <th>Phạm vi</th>
        <th>Hiệu năng</th>
        <th>Độ bảo mật</th>
        <th>Phù hợp</th>
      </tr>
      <tr>
        <td><strong>TDE</strong></td>
        <td>Toàn bộ DB</td>
        <td>Ảnh hưởng ít</td>
        <td>Cao</td>
        <td>Bảo vệ file backup</td>
      </tr>
      <tr>
        <td><strong>Column Encryption</strong></td>
        <td>Từng cột</td>
        <td>Ảnh hưởng vừa</td>
        <td>Rất cao</td>
        <td>Dữ liệu nhạy cảm cụ thể</td>
      </tr>
      <tr>
        <td><strong>Always Encrypted</strong></td>
        <td>Từng cột</td>
        <td>Ảnh hưởng nhiều</td>
        <td>Cực cao</td>
        <td>Yêu cầu end-to-end</td>
      </tr>
      <tr>
        <td><strong>TLS/SSL</strong></td>
        <td>Truyền tải</td>
        <td>Ảnh hưởng ít</td>
        <td>Cao</td>
        <td>Mọi kết nối</td>
      </tr>
    </table>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">11</span>
    </div>
    <h3>2.2.3. Giải pháp 3: Kiểm toán (Database Auditing)</h3>
    <p><strong>Mục tiêu:</strong> Ghi nhận và giám sát mọi hoạt động trên CSDL để phát hiện bất thường.</p>
    <table>
      <tr>
        <th>Loại sự kiện</th>
        <th>Ví dụ</th>
        <th>Mức độ quan trọng</th>
      </tr>
      <tr>
        <td>Đăng nhập/Đăng xuất</td>
        <td>Login thành công/thất bại</td>
        <td>Cao</td>
      </tr>
      <tr>
        <td>Thay đổi dữ liệu</td>
        <td>INSERT, UPDATE, DELETE trên bảng nhạy cảm</td>
        <td>Rất cao</td>
      </tr>
      <tr>
        <td>Thay đổi cấu trúc</td>
        <td>ALTER TABLE, DROP TABLE</td>
        <td>Rất cao</td>
      </tr>
      <tr>
        <td>Thay đổi quyền</td>
        <td>GRANT, REVOKE, DENY</td>
        <td>Cao</td>
      </tr>
      <tr>
        <td>Truy vấn dữ liệu</td>
        <td>SELECT trên dữ liệu nhạy cảm</td>
        <td>Trung bình</td>
      </tr>
      <tr>
        <td>Sao lưu/Phục hồi</td>
        <td>BACKUP, RESTORE</td>
        <td>Cao</td>
      </tr>
    </table>
    <h3>2.2.4. Giải pháp 4: Sao lưu và Phục hồi (Backup &amp; Recovery)</h3>
    <p><strong>Mục tiêu:</strong> Đảm bảo khả năng phục hồi dữ liệu nhanh chóng khi xảy ra sự cố.</p>
    <table>
      <tr>
        <th>Loại sao lưu</th>
        <th>Tần suất</th>
        <th>Mô tả</th>
        <th>Recovery Point</th>
      </tr>
      <tr>
        <td><strong>Full Backup</strong></td>
        <td>Hàng ngày (tối)</td>
        <td>Sao lưu toàn bộ database</td>
        <td>Đến thời điểm backup</td>
      </tr>
      <tr>
        <td><strong>Differential Backup</strong></td>
        <td>Mỗi 6 giờ</td>
        <td>Sao lưu phần thay đổi từ Full gần nhất</td>
        <td>Đến thời điểm diff backup</td>
      </tr>
      <tr>
        <td><strong>Transaction Log Backup</strong></td>
        <td>Mỗi 15-30 phút</td>
        <td>Sao lưu log giao dịch</td>
        <td>Đến thời điểm cụ thể (point-in-time)</td>
      </tr>
    </table>
    <p><strong>Nguyên tắc 3-2-1:</strong> <strong>3</strong> bản sao lưu, <strong>2</strong> loại phương tiện khác nhau,
      <strong>1</strong> bản ở vị trí khác (offsite/cloud).
    </p>
    <hr class="separator">
    <h2>2.3. Tổng kết các giải pháp</h2>
    <p>Bốn giải pháp tạo thành hệ thống bảo mật toàn diện theo nguyên tắc <strong>Defense in Depth</strong> (Phòng thủ
      nhiều lớp).</p>
  </div>

  <!-- ===== CHƯƠNG 3 ===== -->
  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">14</span>
    </div>
    <h1 class="chapter">Chương 3. Demo Các Bước Bảo Mật Trên SQL Server</h1>
    <blockquote><strong>Môi trường demo:</strong> Microsoft SQL Server 2019/2022, SQL Server Management Studio
      (SSMS)<br><strong>Database mẫu:</strong> <code>QuanLyNhanSu</code> — Hệ thống quản lý nhân sự</blockquote>
    <h2>3.0. Chuẩn bị môi trường Demo</h2>
    <h3>Tạo Database và dữ liệu mẫu</h3>
    <pre>CREATE DATABASE QuanLyNhanSu;
GO
USE QuanLyNhanSu;
GO

CREATE TABLE PhongBan (
    MaPB INT PRIMARY KEY IDENTITY(1,1),
    TenPB NVARCHAR(100) NOT NULL,
    MoTa NVARCHAR(500)
);

CREATE TABLE NhanVien (
    MaNV INT PRIMARY KEY IDENTITY(1,1),
    HoTen NVARCHAR(100) NOT NULL,
    Email VARCHAR(100),
    SoDienThoai VARCHAR(15),
    CMND VARCHAR(20),           -- Du lieu nhay cam
    Luong DECIMAL(18,2),        -- Du lieu nhay cam
    MaPB INT FOREIGN KEY REFERENCES PhongBan(MaPB),
    NgayVaoLam DATE,
    ChucVu NVARCHAR(50)
);

CREATE TABLE ChamCong (
    MaCC INT PRIMARY KEY IDENTITY(1,1),
    MaNV INT FOREIGN KEY REFERENCES NhanVien(MaNV),
    NgayChamCong DATE, GioVao TIME, GioRa TIME,
    TrangThai NVARCHAR(20)
);</pre>
    <pre>INSERT INTO PhongBan (TenPB, MoTa) VALUES
(N'Phong Ky thuat', N'Phu trach phat trien phan mem'),
(N'Phong Nhan su', N'Quan ly nhan su va tuyen dung'),
(N'Phong Ke toan', N'Quan ly tai chinh va luong');

INSERT INTO NhanVien (HoTen,Email,SoDienThoai,CMND,Luong,MaPB,NgayVaoLam,ChucVu) VALUES
(N'Nguyen Van An','an.nv@company.com','0901234567','012345678901',25000000,1,'2020-01-15',N'Truong phong'),
(N'Tran Thi Binh','binh.tt@company.com','0912345678','012345678902',18000000,1,'2021-03-20',N'Nhan vien'),
(N'Le Van Cuong','cuong.lv@company.com','0923456789','012345678903',22000000,2,'2019-06-10',N'Truong phong'),
(N'Pham Thi Dung','dung.pt@company.com','0934567890','012345678904',20000000,3,'2020-09-01',N'Ke toan truong'),
(N'Hoang Van Em','em.hv@company.com','0945678901','012345678905',15000000,1,'2022-01-10',N'Nhan vien');
GO</pre>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">16</span>
    </div>
    <h2>3.1. Demo Phân quyền người dùng</h2>
    <h3>Bước 1: Tạo Login</h3>
    <pre>CREATE LOGIN admin_hr WITH PASSWORD = 'Admin@Hr2024!', CHECK_POLICY = ON;
CREATE LOGIN manager_user WITH PASSWORD = 'Manager@2024!', CHECK_POLICY = ON;
CREATE LOGIN staff_user WITH PASSWORD = 'Staff@2024!', CHECK_POLICY = ON;
CREATE LOGIN accountant_user WITH PASSWORD = 'Accountant@2024!', CHECK_POLICY = ON;
GO</pre>
    <h3>Bước 2: Tạo User trong Database</h3>
    <pre>USE QuanLyNhanSu;
GO
CREATE USER admin_hr FOR LOGIN admin_hr;
CREATE USER manager_user FOR LOGIN manager_user;
CREATE USER staff_user FOR LOGIN staff_user;
CREATE USER accountant_user FOR LOGIN accountant_user;
GO</pre>
    <h3>Bước 3: Tạo các Role (vai trò)</h3>
    <pre>CREATE ROLE Role_QuanTriNhanSu;
CREATE ROLE Role_TruongPhong;
CREATE ROLE Role_NhanVien;
CREATE ROLE Role_KeToan;
GO</pre>
    <h3>Bước 4: Gán quyền cho các Role</h3>
    <pre>-- Role Quan tri Nhan su: Toan quyen
GRANT SELECT, INSERT, UPDATE, DELETE ON NhanVien TO Role_QuanTriNhanSu;
GRANT SELECT, INSERT, UPDATE, DELETE ON PhongBan TO Role_QuanTriNhanSu;
GRANT SELECT, INSERT, UPDATE, DELETE ON ChamCong TO Role_QuanTriNhanSu;

-- Role Truong phong: Xem nhan vien va cham cong, KHONG xem luong
GRANT SELECT ON NhanVien (MaNV,HoTen,Email,SoDienThoai,MaPB,NgayVaoLam,ChucVu) TO Role_TruongPhong;
GRANT SELECT ON ChamCong TO Role_TruongPhong;
DENY SELECT ON NhanVien (Luong, CMND) TO Role_TruongPhong;

-- Role Nhan vien: Chi xem thong tin co ban
GRANT SELECT ON NhanVien (MaNV,HoTen,Email,MaPB,ChucVu) TO Role_NhanVien;
DENY SELECT ON NhanVien (CMND,Luong,SoDienThoai) TO Role_NhanVien;

-- Role Ke toan: Xem luong nhung khong duoc sua
GRANT SELECT ON NhanVien (MaNV,HoTen,Luong,MaPB) TO Role_KeToan;
DENY INSERT, UPDATE, DELETE ON NhanVien TO Role_KeToan;
GO</pre>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">17</span>
    </div>
    <h3>Bước 5-6: Gán User vào Role và Kiểm tra</h3>
    <pre>ALTER ROLE Role_QuanTriNhanSu ADD MEMBER admin_hr;
ALTER ROLE Role_TruongPhong ADD MEMBER manager_user;
ALTER ROLE Role_NhanVien ADD MEMBER staff_user;
ALTER ROLE Role_KeToan ADD MEMBER accountant_user;
GO

-- KIEM TRA: Dang nhap bang staff_user
EXECUTE AS USER = 'staff_user';
    SELECT MaNV, HoTen, Email, ChucVu FROM NhanVien;  -- THANH CONG
    SELECT Luong FROM NhanVien;                         -- BI TU CHOI
REVERT;
GO

-- KIEM TRA: Dang nhap bang accountant_user
EXECUTE AS USER = 'accountant_user';
    SELECT MaNV, HoTen, Luong FROM NhanVien;           -- THANH CONG
    UPDATE NhanVien SET Luong = 30000000 WHERE MaNV=1;  -- BI TU CHOI
REVERT;
GO</pre>
    <h3>Kết quả mong đợi</h3>
    <table class="result-table">
      <tr>
        <th>User</th>
        <th>Xem NV cơ bản</th>
        <th>Xem Lương</th>
        <th>Sửa dữ liệu</th>
        <th>Xem Chấm công</th>
      </tr>
      <tr>
        <td>admin_hr</td>
        <td>&#9989;</td>
        <td>&#9989;</td>
        <td>&#9989;</td>
        <td>&#9989;</td>
      </tr>
      <tr>
        <td>manager_user</td>
        <td>&#9989;</td>
        <td>&#10060;</td>
        <td>&#10060;</td>
        <td>&#9989;</td>
      </tr>
      <tr>
        <td>staff_user</td>
        <td>&#9989; (hạn chế)</td>
        <td>&#10060;</td>
        <td>&#10060;</td>
        <td>&#10060;</td>
      </tr>
      <tr>
        <td>accountant_user</td>
        <td>&#9989; (hạn chế)</td>
        <td>&#9989;</td>
        <td>&#10060;</td>
        <td>&#10060;</td>
      </tr>
    </table>
    <hr class="separator">
    <h2>3.2. Demo Mã hóa dữ liệu</h2>
    <h3>3.2.1. Mã hóa cột dữ liệu nhạy cảm (Column-Level Encryption)</h3>
    <pre>-- Buoc 1: Tao Master Key va Certificate
CREATE MASTER KEY ENCRYPTION BY PASSWORD = 'MasterKey@2024!Secure';
GO
CREATE CERTIFICATE Cert_NhanVien
    WITH SUBJECT = 'Certificate for NhanVien sensitive data';
GO
CREATE SYMMETRIC KEY Key_NhanVien
    WITH ALGORITHM = AES_256
    ENCRYPTION BY CERTIFICATE Cert_NhanVien;
GO

-- Buoc 2: Them cot ma hoa
ALTER TABLE NhanVien ADD CMND_Encrypted VARBINARY(256);
ALTER TABLE NhanVien ADD Luong_Encrypted VARBINARY(256);
GO

-- Ma hoa du lieu
OPEN SYMMETRIC KEY Key_NhanVien DECRYPTION BY CERTIFICATE Cert_NhanVien;
UPDATE NhanVien SET
    CMND_Encrypted = EncryptByKey(Key_GUID('Key_NhanVien'), CMND),
    Luong_Encrypted = EncryptByKey(Key_GUID('Key_NhanVien'), CAST(Luong AS VARCHAR(50)));
CLOSE SYMMETRIC KEY Key_NhanVien;
GO

-- Buoc 3: Xoa cot ban ro (QUAN TRONG!)
-- Neu de song song cot goc va cot ma hoa, viec ma hoa tro nen vo nghia
ALTER TABLE NhanVien DROP COLUMN CMND;
ALTER TABLE NhanVien DROP COLUMN Luong;
GO</pre>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">19</span>
    </div>
    <h3>Giải mã dữ liệu khi cần</h3>
    <pre>OPEN SYMMETRIC KEY Key_NhanVien DECRYPTION BY CERTIFICATE Cert_NhanVien;
SELECT MaNV, HoTen,
    CONVERT(VARCHAR(20), DecryptByKey(CMND_Encrypted)) AS CMND_GiaiMa,
    CONVERT(DECIMAL(18,2), CONVERT(VARCHAR(50), DecryptByKey(Luong_Encrypted))) AS Luong_GiaiMa
FROM NhanVien;
CLOSE SYMMETRIC KEY Key_NhanVien;
GO</pre>
    <h3>3.2.2. Transparent Data Encryption (TDE)</h3>
    <pre>USE master;
GO
CREATE MASTER KEY ENCRYPTION BY PASSWORD = 'ServerMaster@2024!';
GO
CREATE CERTIFICATE Cert_TDE_QuanLyNhanSu
    WITH SUBJECT = 'TDE Certificate for QuanLyNhanSu';
GO
USE QuanLyNhanSu;
GO
CREATE DATABASE ENCRYPTION KEY
    WITH ALGORITHM = AES_256
    ENCRYPTION BY SERVER CERTIFICATE Cert_TDE_QuanLyNhanSu;
GO
ALTER DATABASE QuanLyNhanSu SET ENCRYPTION ON;
GO</pre>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">21</span>
    </div>
    <h2>3.3. Demo Kiểm toán (Audit)</h2>
    <pre>-- Buoc 1: Tao Server Audit
USE master;
GO
CREATE SERVER AUDIT Audit_QuanLyNhanSu
TO FILE (FILEPATH = 'C:\AuditLogs\', MAXSIZE = 100 MB, MAX_ROLLOVER_FILES = 10)
WITH (QUEUE_DELAY = 1000, ON_FAILURE = CONTINUE);
GO
ALTER SERVER AUDIT Audit_QuanLyNhanSu WITH (STATE = ON);
GO

-- Buoc 2: Tao Database Audit Specification
USE QuanLyNhanSu;
GO
CREATE DATABASE AUDIT SPECIFICATION AuditSpec_NhanVien
FOR SERVER AUDIT Audit_QuanLyNhanSu
ADD (SELECT ON OBJECT::dbo.NhanVien BY public),
ADD (INSERT ON OBJECT::dbo.NhanVien BY public),
ADD (UPDATE ON OBJECT::dbo.NhanVien BY public),
ADD (DELETE ON OBJECT::dbo.NhanVien BY public)
WITH (STATE = ON);
GO

-- Buoc 3: Thuc hien thao tac de tao log
SELECT * FROM NhanVien;
UPDATE NhanVien SET ChucVu = N'Pho phong' WHERE MaNV = 2;
INSERT INTO NhanVien (HoTen,Email,CMND,Luong,MaPB,NgayVaoLam,ChucVu)
VALUES (N'Do Van Phuc','phuc.dv@company.com','012345678906',16000000,2,'2024-02-01',N'Nhan vien');
DELETE FROM NhanVien WHERE MaNV = 6;
GO

-- Buoc 4: Xem ket qua audit log
SELECT event_time AS ThoiGian,
    CASE action_id
        WHEN 'SL' THEN 'SELECT' WHEN 'IN' THEN 'INSERT'
        WHEN 'UP' THEN 'UPDATE' WHEN 'DL' THEN 'DELETE'
        ELSE action_id
    END AS HanhDong,
    server_principal_name AS NguoiDung,
    object_name AS TenBang,
    statement AS CauLenhSQL,
    succeeded AS KetQua
FROM sys.fn_get_audit_file('C:\AuditLogs\*.sqlaudit', DEFAULT, DEFAULT)
WHERE database_name = 'QuanLyNhanSu'
ORDER BY event_time DESC;
GO</pre>
    <h3>Kết quả mong đợi</h3>
    <table class="result-table">
      <tr>
        <th>Thời gian</th>
        <th>Hành động</th>
        <th>Người dùng</th>
        <th>Bảng</th>
        <th>Kết quả</th>
      </tr>
      <tr>
        <td>2024-01-15 10:30</td>
        <td>DELETE</td>
        <td>admin_hr</td>
        <td>NhanVien</td>
        <td>Thành công</td>
      </tr>
      <tr>
        <td>2024-01-15 10:29</td>
        <td>INSERT</td>
        <td>admin_hr</td>
        <td>NhanVien</td>
        <td>Thành công</td>
      </tr>
      <tr>
        <td>2024-01-15 10:28</td>
        <td>UPDATE</td>
        <td>admin_hr</td>
        <td>NhanVien</td>
        <td>Thành công</td>
      </tr>
      <tr>
        <td>2024-01-15 10:27</td>
        <td>SELECT</td>
        <td>admin_hr</td>
        <td>NhanVien</td>
        <td>Thành công</td>
      </tr>
    </table>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">23</span>
    </div>
    <h2>3.4. Demo Sao lưu và Phục hồi</h2>
    <h3>3.4.1. Sao lưu (Backup)</h3>
    <pre>-- Full Backup (co ma hoa bao ve file backup)
BACKUP DATABASE QuanLyNhanSu
TO DISK = 'C:\Backup\QuanLyNhanSu_Full.bak'
WITH FORMAT, INIT, NAME = N'Full Backup', COMPRESSION, CHECKSUM, STATS = 10;
GO

-- Differential Backup
BACKUP DATABASE QuanLyNhanSu
TO DISK = 'C:\Backup\QuanLyNhanSu_Diff.bak'
WITH DIFFERENTIAL, FORMAT, INIT, COMPRESSION, CHECKSUM, STATS = 10;
GO

-- Transaction Log Backup
ALTER DATABASE QuanLyNhanSu SET RECOVERY FULL;
GO
BACKUP LOG QuanLyNhanSu
TO DISK = 'C:\Backup\QuanLyNhanSu_Log.trn'
WITH FORMAT, INIT, COMPRESSION, CHECKSUM, STATS = 10;
GO</pre>
    <h3>3.4.2. Phục hồi sau khi xóa nhầm dữ liệu</h3>
    <pre>-- Gia lap su co: Xoa nham toan bo nhan vien!
DELETE FROM ChamCong;
DELETE FROM NhanVien;
SELECT COUNT(*) AS SoNhanVien FROM NhanVien;  -- Ket qua: 0

-- PHUC HOI TU BACKUP
USE master;
ALTER DATABASE QuanLyNhanSu SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
GO
RESTORE DATABASE QuanLyNhanSu FROM DISK='C:\Backup\QuanLyNhanSu_Full.bak'
    WITH NORECOVERY, REPLACE, STATS=10;
RESTORE DATABASE QuanLyNhanSu FROM DISK='C:\Backup\QuanLyNhanSu_Diff.bak'
    WITH NORECOVERY, STATS=10;
RESTORE LOG QuanLyNhanSu FROM DISK='C:\Backup\QuanLyNhanSu_Log.trn'
    WITH RECOVERY, STATS=10;
GO
ALTER DATABASE QuanLyNhanSu SET MULTI_USER;
GO
USE QuanLyNhanSu;
SELECT COUNT(*) AS SoNhanVien FROM NhanVien; -- Ket qua: 6
GO</pre>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">25</span>
    </div>
    <h2>3.5. Tổng kết Demo</h2>
    <table class="result-table">
      <tr>
        <th>Giải pháp</th>
        <th>Mục tiêu</th>
        <th>Kết quả Demo</th>
      </tr>
      <tr>
        <td><strong>Phân quyền</strong></td>
        <td>Kiểm soát truy cập theo vai trò</td>
        <td>&#9989; 4 role với quyền khác nhau, kiểm tra deny thành công</td>
      </tr>
      <tr>
        <td><strong>Mã hóa</strong></td>
        <td>Bảo vệ dữ liệu nhạy cảm</td>
        <td>&#9989; Column encryption (AES-256) + TDE cho toàn DB</td>
      </tr>
      <tr>
        <td><strong>Kiểm toán</strong></td>
        <td>Ghi nhận mọi hoạt động</td>
        <td>&#9989; Server Audit + Database Audit Specification</td>
      </tr>
      <tr>
        <td><strong>Sao lưu/Phục hồi</strong></td>
        <td>Đảm bảo khả năng phục hồi</td>
        <td>&#9989; Full + Diff + Log backup, restore thành công</td>
      </tr>
    </table>
  </div>

  <!-- ===== CHƯƠNG 4: OPDO.STORE ===== -->
  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">26</span>
    </div>
    <h1 class="chapter">Chương 4. Áp Dụng Bảo Mật Cho Dự Án Thực Tiễn — Opdo.store</h1>
    <h2>4.1. Giới thiệu dự án Opdo.store</h2>
    <h3>4.1.1. Tổng quan</h3>
    <p><strong>Opdo.store</strong> (<a href="https://opdo.store" target="_blank">https://opdo.store</a>) là sàn thương
      mại điện tử chuyên về phụ tùng ô tô chính hãng cho các dòng xe châu Âu (BMW, Mercedes-Benz, Audi, Volkswagen...).
      Hệ thống kết nối người bán (verified sellers) với người mua, cung cấp dịch vụ tra cứu phụ tùng, đặt hàng trực
      tuyến, thanh toán và vận chuyển.</p>
    <h3>4.1.2. Yêu cầu bảo mật đặc thù của E-commerce</h3>
    <table>
      <tr>
        <th>Loại dữ liệu</th>
        <th>Mức độ nhạy cảm</th>
        <th>Yêu cầu bảo mật</th>
      </tr>
      <tr>
        <td><strong>Thông tin khách hàng</strong></td>
        <td>&#128308; Rất cao</td>
        <td>Họ tên, email, SĐT, địa chỉ giao hàng</td>
      </tr>
      <tr>
        <td><strong>Thông tin thanh toán</strong></td>
        <td>&#128308; Rất cao</td>
        <td>Số thẻ, thông tin ngân hàng, lịch sử giao dịch</td>
      </tr>
      <tr>
        <td><strong>Thông tin người bán</strong></td>
        <td>&#128308; Rất cao</td>
        <td>CMND/CCCD, giấy phép kinh doanh, tài khoản bank</td>
      </tr>
      <tr>
        <td><strong>Đơn hàng &amp; Giao dịch</strong></td>
        <td>&#128992; Cao</td>
        <td>Chi tiết đơn hàng, trạng thái, giá bán</td>
      </tr>
      <tr>
        <td><strong>Danh mục sản phẩm</strong></td>
        <td>&#128993; Trung bình</td>
        <td>Thông tin phụ tùng, giá nhập, giá bán</td>
      </tr>
    </table>
    <h3>4.1.3. Các mối đe dọa cụ thể với Opdo.store</h3>
    <ul>
      <li><strong>SQL Injection:</strong> Tấn công qua form tìm kiếm phụ tùng, đăng nhập, đăng ký.</li>
      <li><strong>XSS (Cross-Site Scripting):</strong> Chèn mã độc vào mô tả sản phẩm, review.</li>
      <li><strong>CSRF (Cross-Site Request Forgery):</strong> Giả mạo request đặt hàng, thanh toán.</li>
      <li><strong>Brute Force Login:</strong> Thử mật khẩu tài khoản admin, người bán, khách hàng.</li>
      <li><strong>Data Breach:</strong> Rò rỉ thông tin thanh toán, dữ liệu cá nhân khách hàng.</li>
    </ul>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">28</span>
    </div>
    <h2>4.2. Kiến trúc hệ thống và cơ sở dữ liệu</h2>
    <table>
      <tr>
        <th>Bảng</th>
        <th>Mô tả</th>
        <th>Dữ liệu nhạy cảm</th>
      </tr>
      <tr>
        <td><code>Users</code></td>
        <td>Tài khoản người dùng</td>
        <td>Password hash, Email, SĐT</td>
      </tr>
      <tr>
        <td><code>Sellers</code></td>
        <td>Thông tin chi tiết người bán</td>
        <td>CMND, Giấy phép KD, TK ngân hàng</td>
      </tr>
      <tr>
        <td><code>Products</code></td>
        <td>Danh mục phụ tùng ô tô</td>
        <td>Giá nhập, giá bán</td>
      </tr>
      <tr>
        <td><code>Orders</code></td>
        <td>Đơn hàng</td>
        <td>Địa chỉ giao hàng, tổng tiền</td>
      </tr>
      <tr>
        <td><code>Payments</code></td>
        <td>Giao dịch thanh toán</td>
        <td>Token thẻ, mã giao dịch</td>
      </tr>
      <tr>
        <td><code>AuditLogs</code></td>
        <td>Nhật ký hoạt động</td>
        <td>Toàn bộ thao tác hệ thống</td>
      </tr>
    </table>
    <h2>4.3. Triển khai phân quyền cho Quản trị viên và Tài khoản Dịch vụ</h2>
    <blockquote><strong>Lưu ý kiến trúc:</strong> Trong ứng dụng Web/E-commerce hiện đại, <strong>khách hàng (Customer)
        và người bán (Seller) không truy cập trực tiếp vào CSDL</strong>. Ứng dụng Backend sử dụng một <strong>Service
        Account</strong> duy nhất với quyền hạn tối thiểu để thay mặt người dùng thực thi các truy vấn đã được tham số
      hóa (Parameterized Queries). Việc xác định ai là Customer/Seller được xử lý bằng JWT token ở tầng ứng dụng.
    </blockquote>
    <h3>4.3.1. Mô hình phân quyền RBAC</h3>
    <table>
      <tr>
        <th>Role</th>
        <th>Mô tả</th>
        <th>Quyền chính</th>
      </tr>
      <tr>
        <td><strong>SuperAdmin</strong></td>
        <td>Quản trị viên cao nhất</td>
        <td>Toàn quyền hệ thống, quản lý user, cấu hình</td>
      </tr>
      <tr>
        <td><strong>Admin</strong></td>
        <td>Quản trị viên</td>
        <td>Quản lý sản phẩm, đơn hàng, duyệt người bán</td>
      </tr>
      <tr>
        <td><strong>Seller</strong></td>
        <td>Người bán hàng</td>
        <td>CRUD sản phẩm của mình, xem đơn hàng của mình</td>
      </tr>
      <tr>
        <td><strong>Customer</strong></td>
        <td>Khách hàng</td>
        <td>Xem sản phẩm, đặt hàng, xem đơn hàng cá nhân</td>
      </tr>
      <tr>
        <td><strong>Support</strong></td>
        <td>Nhân viên hỗ trợ</td>
        <td>Xem đơn hàng, hỗ trợ KH, KHÔNG xem thanh toán</td>
      </tr>
    </table>
    <h3>4.3.2. Triển khai trên SQL Server</h3>
    <pre>CREATE ROLE Role_SuperAdmin;
CREATE ROLE Role_Admin;
CREATE ROLE Role_Seller;
CREATE ROLE Role_Customer;
CREATE ROLE Role_Support;
GO

GRANT CONTROL ON DATABASE::OpdoStore TO Role_SuperAdmin;

GRANT SELECT, INSERT, UPDATE ON Products TO Role_Admin;
GRANT SELECT, UPDATE ON Orders TO Role_Admin;
DENY DELETE ON Users TO Role_Admin;
DENY SELECT ON Payments (CardToken) TO Role_Admin;

GRANT SELECT, INSERT, UPDATE ON Products TO Role_Seller;
GRANT SELECT ON Orders TO Role_Seller;
DENY SELECT ON Payments TO Role_Seller;

GRANT SELECT ON Products TO Role_Customer;
GRANT SELECT, INSERT ON Orders TO Role_Customer;
DENY SELECT ON Payments TO Role_Customer;

GRANT SELECT ON Orders TO Role_Support;
GRANT SELECT ON Users (UserID, HoTen, Email) TO Role_Support;
DENY SELECT ON Payments TO Role_Support;
GO</pre>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">30</span>
    </div>
    <h2>4.4. Triển khai mã hóa dữ liệu</h2>
    <h3>4.4.1. Băm mật khẩu (Password Hashing)</h3>
    <p><strong>Băm (Hashing) không phải là Mã hóa (Encryption).</strong> Mã hóa là hàm 2 chiều (có thể giải mã), còn Băm
      là hàm 1 chiều — không thể khôi phục mật khẩu gốc từ chuỗi băm.</p>
    <p>Mật khẩu tuyệt đối không lưu dưới dạng bản rõ (plain-text). Quá trình băm bằng thuật toán <strong>bcrypt</strong>
      + salt được thực hiện tại <strong>tầng Ứng dụng (Backend)</strong> — ví dụ Node.js, C#, Java — trước khi lưu chuỗi
      băm vào CSDL. Điều này đảm bảo Database Server không bao giờ nhìn thấy mật khẩu thật.</p>
    <p><em>Lưu ý: SQL Server không có sẵn hàm bcrypt. Việc băm phải được xử lý ở code Backend, không phải ở stored
        procedure.</em></p>
    <h3>4.4.2. Mã hóa dữ liệu nhạy cảm (Column-Level Encryption)</h3>
    <pre>CREATE MASTER KEY ENCRYPTION BY PASSWORD = 'OpdoStore@Master2025!';
GO
CREATE CERTIFICATE Cert_OpdoStore
    WITH SUBJECT = 'Opdo.store Sensitive Data Encryption';
GO
CREATE SYMMETRIC KEY Key_OpdoPayment
    WITH ALGORITHM = AES_256
    ENCRYPTION BY CERTIFICATE Cert_OpdoStore;
GO

ALTER TABLE Payments ADD CardToken_Encrypted VARBINARY(512);
GO
OPEN SYMMETRIC KEY Key_OpdoPayment DECRYPTION BY CERTIFICATE Cert_OpdoStore;
UPDATE Payments SET CardToken_Encrypted =
    EncryptByKey(Key_GUID('Key_OpdoPayment'), CardToken);
CLOSE SYMMETRIC KEY Key_OpdoPayment;
GO</pre>
    <h3>4.4.3. Transparent Data Encryption (TDE) cho toàn bộ DB</h3>
    <pre>USE master;
GO
CREATE CERTIFICATE Cert_TDE_OpdoStore
    WITH SUBJECT = 'TDE Certificate for OpdoStore Production';
GO
USE OpdoStore;
GO
CREATE DATABASE ENCRYPTION KEY
    WITH ALGORITHM = AES_256
    ENCRYPTION BY SERVER CERTIFICATE Cert_TDE_OpdoStore;
GO
ALTER DATABASE OpdoStore SET ENCRYPTION ON;
GO</pre>
    <h3>4.4.4. HTTPS/TLS cho truyền tải</h3>
    <p>Toàn bộ kết nối tới Opdo.store sử dụng <strong>TLS 1.3</strong> qua Cloudflare SSL, đảm bảo dữ liệu truyền giữa
      trình duyệt khách hàng và server được mã hóa hoàn toàn.</p>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">31</span>
    </div>
    <h2>4.5. Triển khai kiểm toán và giám sát</h2>
    <pre>CREATE SERVER AUDIT Audit_OpdoStore
TO FILE (FILEPATH = 'D:\OpdoAuditLogs\', MAXSIZE = 200 MB, MAX_ROLLOVER_FILES = 20)
WITH (QUEUE_DELAY = 1000, ON_FAILURE = CONTINUE);
GO
ALTER SERVER AUDIT Audit_OpdoStore WITH (STATE = ON);
GO

USE OpdoStore;
GO
CREATE DATABASE AUDIT SPECIFICATION AuditSpec_OpdoStore
FOR SERVER AUDIT Audit_OpdoStore
ADD (SELECT, INSERT, UPDATE, DELETE ON OBJECT::dbo.Users BY public),
ADD (SELECT, INSERT, UPDATE, DELETE ON OBJECT::dbo.Payments BY public),
ADD (SELECT, INSERT, UPDATE, DELETE ON OBJECT::dbo.Sellers BY public),
ADD (SELECT, INSERT, UPDATE, DELETE ON OBJECT::dbo.Orders BY public)
WITH (STATE = ON);
GO</pre>
    <h3>Application-Level Logging</h3>
    <table>
      <tr>
        <th>Sự kiện</th>
        <th>Thông tin ghi nhận</th>
        <th>Mức độ</th>
      </tr>
      <tr>
        <td>Đăng nhập thành công/thất bại</td>
        <td>User, IP, UserAgent, Timestamp</td>
        <td>INFO / WARNING</td>
      </tr>
      <tr>
        <td>Thay đổi mật khẩu</td>
        <td>User, IP, Timestamp</td>
        <td>WARNING</td>
      </tr>
      <tr>
        <td>Đặt hàng / Thanh toán</td>
        <td>OrderID, UserID, Amount, Status</td>
        <td>INFO</td>
      </tr>
      <tr>
        <td>Truy cập admin panel</td>
        <td>AdminID, Action, Target, IP</td>
        <td>WARNING</td>
      </tr>
      <tr>
        <td>Export dữ liệu</td>
        <td>UserID, DataType, RecordCount</td>
        <td>CRITICAL</td>
      </tr>
    </table>
    <hr class="separator">
    <h2>4.6. Triển khai sao lưu và phục hồi</h2>
    <table>
      <tr>
        <th>Loại</th>
        <th>Tần suất</th>
        <th>Lưu trữ</th>
        <th>Retention</th>
      </tr>
      <tr>
        <td><strong>Full Backup</strong></td>
        <td>Hàng đêm 2:00 AM</td>
        <td>Local + Azure Blob</td>
        <td>30 ngày</td>
      </tr>
      <tr>
        <td><strong>Differential</strong></td>
        <td>Mỗi 4 giờ</td>
        <td>Local SSD</td>
        <td>7 ngày</td>
      </tr>
      <tr>
        <td><strong>Transaction Log</strong></td>
        <td>Mỗi 15 phút</td>
        <td>Local SSD</td>
        <td>3 ngày</td>
      </tr>
      <tr>
        <td><strong>Offsite Copy</strong></td>
        <td>Hàng tuần</td>
        <td>Azure Blob (Geo-redundant)</td>
        <td>90 ngày</td>
      </tr>
    </table>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">33</span>
    </div>
    <h2>4.7. Các biện pháp bảo mật bổ sung</h2>
    <h3>4.7.1. Bảo mật tầng ứng dụng</h3>
    <table>
      <tr>
        <th>Biện pháp</th>
        <th>Mô tả</th>
        <th>Công cụ/Thư viện</th>
      </tr>
      <tr>
        <td><strong>Parameterized Queries</strong></td>
        <td>Chống SQL Injection bằng tham số hóa truy vấn</td>
        <td>Entity Framework / Sequelize ORM</td>
      </tr>
      <tr>
        <td><strong>Input Validation</strong></td>
        <td>Kiểm tra và sanitize mọi dữ liệu đầu vào</td>
        <td>Joi / FluentValidation</td>
      </tr>
      <tr>
        <td><strong>CSRF Token</strong></td>
        <td>Token chống giả mạo request</td>
        <td>csurf middleware</td>
      </tr>
      <tr>
        <td><strong>Content Security Policy</strong></td>
        <td>Chống XSS bằng CSP headers</td>
        <td>Helmet.js</td>
      </tr>
      <tr>
        <td><strong>Rate Limiting</strong></td>
        <td>Giới hạn số request/phút chống brute force</td>
        <td>express-rate-limit</td>
      </tr>
      <tr>
        <td><strong>JWT + Refresh Token</strong></td>
        <td>Xác thực stateless với token có thời hạn</td>
        <td>jsonwebtoken</td>
      </tr>
    </table>
    <h3>4.7.2. Bảo mật hạ tầng</h3>
    <ul>
      <li><strong>Cloudflare WAF:</strong> Web Application Firewall lọc traffic độc hại, chống DDoS.</li>
      <li><strong>Network Segmentation:</strong> Tách biệt mạng web server, app server và database server.</li>
      <li><strong>SQL Server Firewall:</strong> Chỉ cho phép kết nối từ app server, chặn truy cập trực tiếp.</li>
      <li><strong>SSH Key Authentication:</strong> Truy cập server qua SSH key, không dùng password.</li>
    </ul>
    <h3>4.7.3. Tuân thủ quy định</h3>
    <ul>
      <li><strong>PCI DSS:</strong> Tuân thủ tiêu chuẩn bảo mật thanh toán — sử dụng payment gateway (Stripe/VNPay).
      </li>
      <li><strong>Luật An ninh mạng VN (24/2018):</strong> Lưu trữ dữ liệu người dùng Việt Nam trên server tại Việt Nam.
      </li>
      <li><strong>Nghị định 13/2023/NĐ-CP:</strong> Bảo vệ dữ liệu cá nhân — thông báo mục đích thu thập, cho phép xóa
        dữ liệu.</li>
    </ul>
    <hr class="separator">
    <h2>4.8. Tổng kết triển khai thực tiễn</h2>
    <table class="result-table">
      <tr>
        <th>Giải pháp</th>
        <th>Lý thuyết (Ch.2)</th>
        <th>Triển khai trên Opdo.store</th>
        <th>Trạng thái</th>
      </tr>
      <tr>
        <td><strong>Phân quyền</strong></td>
        <td>RBAC, Least Privilege</td>
        <td>RBAC, Column-level DENY</td>
        <td>&#9989; Hoàn thành</td>
      </tr>
      <tr>
        <td><strong>Mã hóa</strong></td>
        <td>AES-256, TDE</td>
        <td>Password bcrypt, Column encryption, TDE, TLS 1.3</td>
        <td>&#9989; Hoàn thành</td>
      </tr>
      <tr>
        <td><strong>Kiểm toán</strong></td>
        <td>Server Audit</td>
        <td>DB Audit + App-level logging + Cloudflare logs</td>
        <td>&#9989; Hoàn thành</td>
      </tr>
      <tr>
        <td><strong>Sao lưu</strong></td>
        <td>Full + Diff + Log</td>
        <td>Automated backup, Azure Blob offsite, 3-2-1 rule</td>
        <td>&#9989; Hoàn thành</td>
      </tr>
      <tr>
        <td><strong>Bảo mật ứng dụng</strong></td>
        <td>(Mở rộng)</td>
        <td>ORM, CSRF, CSP, Rate Limit, JWT</td>
        <td>&#9989; Hoàn thành</td>
      </tr>
      <tr>
        <td><strong>Bảo mật hạ tầng</strong></td>
        <td>(Mở rộng)</td>
        <td>Cloudflare WAF, Firewall, Network segmentation</td>
        <td>&#9989; Hoàn thành</td>
      </tr>
    </table>
    <blockquote>Việc triển khai thực tiễn trên Opdo.store cho thấy các giải pháp bảo mật đề xuất ở Chương 2 hoàn toàn
      khả thi và hiệu quả khi áp dụng vào dự án thương mại điện tử thực tế.</blockquote>
  </div>

  <!-- KẾT LUẬN -->
  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">35</span>
    </div>
    <h1 class="chapter">Kết Luận</h1>
    <h2>Tổng kết</h2>
    <p>Qua quá trình nghiên cứu và thực hành, tài liệu đã trình bày hệ thống các vấn đề về bảo mật và an toàn thông tin
      trong cơ sở dữ liệu:</p>
    <p><strong>Chương 1</strong> — Hệ thống hóa kiến thức nền tảng về CSDL, HQTCSDL, và phân tích toàn diện ưu nhược
      điểm của bảo mật thông tin.</p>
    <p><strong>Chương 2</strong> — Phân tích chi tiết các mối đe dọa, đề xuất 4 giải pháp theo nguyên tắc Defense in
      Depth.</p>
    <p><strong>Chương 3</strong> — Triển khai thành công cả 4 giải pháp trên SQL Server với database mẫu
      <code>QuanLyNhanSu</code>.
    </p>
    <p><strong>Chương 4</strong> — Áp dụng thành công các giải pháp bảo mật vào dự án thực tiễn Opdo.store — sàn thương
      mại điện tử phụ tùng ô tô, chứng minh tính khả thi và hiệu quả trong thực tế.</p>
    <table>
      <tr>
        <th>STT</th>
        <th>Giải pháp</th>
        <th>Vai trò</th>
      </tr>
      <tr>
        <td>1</td>
        <td>Phân quyền người dùng</td>
        <td><strong>Phòng ngừa</strong> — Kiểm soát ai được truy cập gì</td>
      </tr>
      <tr>
        <td>2</td>
        <td>Mã hóa dữ liệu</td>
        <td><strong>Phòng ngừa</strong> — Bảo vệ dữ liệu khi bị xâm phạm</td>
      </tr>
      <tr>
        <td>3</td>
        <td>Kiểm toán</td>
        <td><strong>Phát hiện</strong> — Giám sát và cảnh báo bất thường</td>
      </tr>
      <tr>
        <td>4</td>
        <td>Sao lưu và phục hồi</td>
        <td><strong>Phục hồi</strong> — Đảm bảo khả năng khôi phục</td>
      </tr>
    </table>
    <h2>Hạn chế và hướng phát triển</h2>
    <p><strong>Hạn chế:</strong> Demo trên môi trường phát triển, chưa đánh giá hiệu năng thực tế với dữ liệu lớn. Tuy
      dự án thực tế Opdo.store đã áp dụng một số biện pháp bảo mật ứng dụng và hạ tầng mạng (WAF, JWT, CSP), nhưng phạm
      vi tiểu luận tập trung chính vào mức CSDL, chưa đi sâu vào các kịch bản kiểm thử xâm nhập (Penetration Testing) để
      đánh giá toàn diện khả năng phòng thủ của hệ thống.</p>
    <p><strong>Hướng phát triển:</strong> Mở rộng bảo mật ứng dụng web; giám sát real-time với SIEM; bảo mật CSDL trên
      đám mây; áp dụng ML phát hiện bất thường; quy trình DevSecOps.</p>
    <h2>Lời cảm ơn</h2>
    <p>Chúng tôi xin chân thành cảm ơn các thầy cô giáo trong chương trình đào tạo Thạc sĩ tại Đại học Hòa Bình đã hướng
      dẫn và tạo điều kiện để hoàn thành tài liệu nghiên cứu này.</p>
    <table>
      <tr>
        <th>Mã học viên</th>
        <th>Họ và tên</th>
        <th>Vai trò</th>
      </tr>
      <tr>
        <td>825802001</td>
        <td><strong>Nguyễn Tuấn Anh</strong></td>
        <td>Nghiên cứu và biên soạn</td>
      </tr>
      <tr>
        <td>825802002</td>
        <td><strong>Nguyễn Thị Phương</strong></td>
        <td>Nghiên cứu và biên soạn</td>
      </tr>
      <tr>
        <td>825802003</td>
        <td><strong>Phan Nguyễn Tấn Vũ</strong></td>
        <td>Nghiên cứu và biên soạn</td>
      </tr>
      <tr>
        <td>825802004</td>
        <td><strong>Nguyễn Hữu Huy</strong></td>
        <td>Nghiên cứu và biên soạn</td>
      </tr>
      <tr>
        <td></td>
        <td><strong>Ma Văn Tú</strong></td>
        <td>Nghiên cứu và biên soạn</td>
      </tr>
    </table>
    <p><strong>Chương trình:</strong> Thạc sĩ — Đại học Hòa Bình</p>
  </div>

  <div class="page">
    <div class="page-header">
      <img class="logo-img" src="logo.png" alt="Logo" onerror="this.style.display='none'">
      <div class="header-text">TRƯỜNG ĐẠI HỌC HÒA BÌNH<span>Chương trình Thạc sĩ — Bài tiểu luận</span></div>
    </div>
    <div class="page-footer">
      <span class="footer-title">Bảo mật và An toàn Thông tin trong Cơ sở Dữ liệu</span>
      <span class="page-number">37</span>
    </div>
    <h2>Tài liệu tham khảo</h2>
    <ol class="ref">
      <li>E.F. Codd, "A Relational Model of Data for Large Shared Data Banks", <em>Communications of the ACM</em>, 1970.
      </li>
      <li>Ramez Elmasri, Shamkant B. Navathe, <em>"Fundamentals of Database Systems"</em>, 7th Edition, Pearson, 2015.
      </li>
      <li>Abraham Silberschatz, Henry F. Korth, <em>"Database System Concepts"</em>, 7th Edition, McGraw-Hill, 2019.
      </li>
      <li>IBM Security, <em>"Cost of a Data Breach Report 2023"</em>, IBM Corporation, 2023.</li>
      <li>Verizon, <em>"Data Breach Investigations Report (DBIR) 2023"</em>, Verizon Enterprise, 2023.</li>
      <li>OWASP Foundation, <em>"OWASP Top 10 — 2021"</em>, owasp.org.</li>
      <li>Microsoft, <em>"SQL Server Security Documentation"</em>, docs.microsoft.com.</li>
      <li>Microsoft, <em>"SQL Server Encryption"</em>, docs.microsoft.com.</li>
      <li>Microsoft, <em>"SQL Server Audit (Database Engine)"</em>, docs.microsoft.com.</li>
      <li>NIST, <em>"Framework for Improving Critical Infrastructure Cybersecurity"</em>, v1.1, 2018.</li>
      <li>Quốc hội nước CHXHCNVN, <em>"Luật An ninh mạng"</em>, Luật số 24/2018/QH14, 2018.</li>
      <li>Chính phủ nước CHXHCNVN, <em>"Nghị định 13/2023/NĐ-CP về Bảo vệ dữ liệu cá nhân"</em>, 2023.</li>
    </ol>
  </div>

</body>

</html>